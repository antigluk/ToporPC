Микроассемблер
========================

Формат микрокоманды
-----------------

+-----------+--------+----------+----------------------+------------+
| 47  ... 42| 41     | 40 .. 33 | 32 .............. 1  | 0          |
+-----------+--------+----------+----------------------+------------+
| ---       | beta 4 | beta 3   | beta 2               | beta1      |
+-----------+--------+----------+----------------------+------------+

**Beta 1**

1 бит, определяет команду перехода

**Beta 2**

+-------+-------+---------------+------------+----------+----------+
| 31    | 30    | 29 ...... 14  | 13 ... 9   | 8 ... 4  | 3 .. 0   |
+-------+-------+---------------+------------+----------+----------+
| ---   | flags | ext (15)      | op2        | op1      | command  |
+-------+-------+---------------+------------+----------+----------+


**Beta 3**

Определяет задержку команды (8 бит)

**Beta 4**

Проверка четности TODO


Операторы
------------------

  - mmov - 0
  - mmovl - 1
  - madd - 3
  - msub - 4
  - mor - 5
  - mxor - 6
  - mand - 7
  - mshl - 8
  - mshr - 9
  - mjcmd - 10
  - mnop - 11

Операторы перехода

  - mjmp
  - mjz
  - mjc
  - mjs
  TODO: not-версии операторов


Операнды
-------------------

Константы и разное
^^^^^^^^^^^^^^^
  - 0: 17 - константа 0x0
  - 1: 16 - константа 0x1
  - FFFF: 18 - константа 0xFFFF
  - EXT: 20 - данные ext[15..0]
  - op1r: 24 - 1 операнд инструкции
  - op1w: 25 - 1 операнд инструкции на запись **??**
  - op2r: 26 - 2 операнд инструкции

Регистры
^^^^^^^^^^^^^^
  - SP: 1  
  - FLAGS: 2 
  - IC: 31

**РОН**
  - R0: 4 
  - R1: 5 
  - R2: 6 
  - R3: 7,
  - R4: 8 
  - R5: 9 
  - R6: 10 
  - R7: 11 
  - R8: 12 
  - R9: 13 
  - R10: 14 
  - R11: 15 

RAM
^^^^^^^^^^^^^^^
  - @IC: 22 
  - @SP: 21 
  - MEM: 19 - данные из памяти

Порты
^^^^^^^^^^^
  - PORT: 30 - порт, прямая нумерация ext[15..0]
  - PORT[R0]: 29 - порт, регистровая нумерация R0[15..0]
  - IENC: 23 - шина прерываний (из шифратора)

  - CMD: 3  **??**

Пустота (/dev/null)
^^^^^^^^^^^^^^^^^^^^
  - NUL: 0 
